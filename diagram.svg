<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="645" height="615" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Title: Microservices auth strategy
Participant User
Participant Login Service as Login
Participant Other Service as Other
Participant Auth Service as Auth
User->Login: login
Login-->Auth: authenticate
Auth-->Login: auth response
Login->>User: jwt cookie
User->Other: request service with jwt cookie
Other-->Auth: check token
Auth-->Other: auth response
Other->>User: service response
User->Login: logout
Login-->Auth: logout
Login->>User: user logged out\n(redirect)]]></source><desc>Microservices auth strategy</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><rect x="10" y="10" width="280" height="29" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="15" y="30" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">Microservices auth strategy</tspan></text></g><g class="actor"><rect x="10" y="49" width="60" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">User</tspan></text></g><g class="actor"><rect x="10" y="556.1875" width="60" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="581.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">User</tspan></text></g><line x1="40" x2="40" y1="88" y2="556.1875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="135" y="49" width="150" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="145" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="145">Login Service</tspan></text></g><g class="actor"><rect x="135" y="556.1875" width="150" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="145" y="581.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="145">Login Service</tspan></text></g><line x1="210" x2="210" y1="88" y2="556.1875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="305" y="49" width="150" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="315" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="315">Other Service</tspan></text></g><g class="actor"><rect x="305" y="556.1875" width="150" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="315" y="581.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="315">Other Service</tspan></text></g><line x1="380" x2="380" y1="88" y2="556.1875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="475" y="49" width="140" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="485" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="485">Auth Service</tspan></text></g><g class="actor"><rect x="475" y="556.1875" width="140" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="485" y="581.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="485">Auth Service</tspan></text></g><line x1="545" x2="545" y1="88" y2="556.1875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="100" y="118.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="100">login</tspan></text><line x1="40" x2="210" y1="127" y2="127" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="317.5" y="157.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="317.5">authenticate</tspan></text><line x1="210" x2="545" y1="166" y2="166" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="312.5" y="196.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="312.5">auth response</tspan></text><line x1="545" x2="210" y1="205" y2="205" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="75" y="235.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="75">jwt cookie</tspan></text><line x1="210" x2="40" y1="244" y2="244" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="55" y="274.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="55">request service with jwt cookie</tspan></text><line x1="40" x2="380" y1="283" y2="283" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="407.5" y="313.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="407.5">check token</tspan></text><line x1="380" x2="545" y1="322" y2="322" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="397.5" y="352.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="397.5">auth response</tspan></text><line x1="545" x2="380" y1="361" y2="361" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="130" y="391.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="130">service response</tspan></text><line x1="380" x2="40" y1="400" y2="400" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g><g class="signal"><text x="95" y="430.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="95">logout</tspan></text><line x1="40" x2="210" y1="439" y2="439" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="347.5" y="469.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="347.5">logout</tspan></text><line x1="210" x2="545" y1="478" y2="478" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="50" y="498.90625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="50">user logged out</tspan><tspan dy="1.2em" x="50">(redirect)</tspan></text><line x1="210" x2="40" y1="536.1875" y2="536.1875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowOpen&quot;);"></line></g></svg>